<!--views\partials\cores.ejs-->
        <h2>Gerenciar Cores</h2>

        <form id="corForm">
            <label for="nome">Nome da Cor:</label>
            <input type="text" id="nome" required>

            <label for="codigo_hex">Código Hexadecimal:</label>
            <input type="color" id="codigo_hex" required>

            <button type="submit">Cadastrar</button>
        </form>

        <div class="table-container">
            <h3>Cores Cadastradas</h3>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Código Hex</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="corList"></tbody>
            </table>
        </div>
    </main>

    <script>
        async function carregarCores() {
            const token = localStorage.getItem("token");
            const response = await fetch("http://localhost:3001/cores", {
                headers: { "Authorization": `Bearer ${token}` }
            });
            const cores = await response.json();
            const tabela = document.getElementById("corList");
            tabela.innerHTML = "";

            cores.forEach(cor => {
                tabela.innerHTML += `
                    <tr>
                        <td>${cor.id}</td>
                        <td>${cor.nome}</td>
                        <td><span style="background:${cor.codigo_hex}; padding:5px; border-radius:3px;">${cor.codigo_hex}</span></td>
                        <td>
                            <button class="delete-btn" onclick="deletarCor(${cor.id})">Excluir</button>
                        </td>
                    </tr>
                `;
            });
        }

        async function deletarCor(id) {
            const token = localStorage.getItem("token");
            await fetch(`http://localhost:3001/cores/${id}`, {
                method: "DELETE",
                headers: { "Authorization": `Bearer ${token}` }
            });
            carregarCores();
        }

        document.getElementById("corForm").addEventListener("submit", async (event) => {
            event.preventDefault();
            const nome = document.getElementById("nome").value;
            const codigo_hex = document.getElementById("codigo_hex").value;
            const token = localStorage.getItem("token");

            await fetch("http://localhost:3001/cores", {
                method: "POST",
                headers: { 
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}`
                },
                body: JSON.stringify({ nome, codigo_hex })
            });

            carregarCores();
        });

        carregarCores();
    </script>

